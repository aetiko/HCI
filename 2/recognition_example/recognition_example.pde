import de.voidplus.dollar.*;

OneDollar one;
String name;

void setup(){
  size(500, 500);
  background(255);
  
  name = "-";
  
  // 1. Create instance of class OneDollar:
  one = new OneDollar(this);
  println(one);                  // Print all the settings
  one.setVerbose(true);          // Activate console verbose
  one.disableAutoCheck();
  
  // 2. Add gestures (templates):
  one.learn("triangle", new int[] {137,139,135,141,133,144,132,146,130,149,128,151,126,155,123,160,120,166,116,171,112,177,107,183,102,188,100,191,95,195,90,199,86,203,82,206,80,209,75,213,73,213,70,216,67,219,64,221,61,223,60,225,62,226,65,225,67,226,74,226,77,227,85,229,91,230,99,231,108,232,116,233,125,233,134,234,145,233,153,232,160,233,170,234,177,235,179,236,186,237,193,238,198,239,200,237,202,239,204,238,206,234,205,230,202,222,197,216,192,207,186,198,179,189,174,183,170,178,164,171,161,168,154,160,148,155,143,150,138,148,136,148} );
  one.learn("circle", new int[] {127,141,124,140,120,139,118,139,116,139,111,140,109,141,104,144,100,147,96,152,93,157,90,163,87,169,85,175,83,181,82,190,82,195,83,200,84,205,88,213,91,216,96,219,103,222,108,224,111,224,120,224,133,223,142,222,152,218,160,214,167,210,173,204,178,198,179,196,182,188,182,177,178,167,170,150,163,138,152,130,143,129,140,131,129,136,126,139} );
  one.learn("p", new int[] {166,276,167,269,168,261,169,251,170,242,170,234,171,227,171,221,171,217,171,213,171,210,171,206,171,202,171,198,171,194,171,188,171,184,171,178,171,172,171,168,171,165,171,163,171,161,170,160,170,158,170,157,170,155,170,153,170,151,170,149,171,145,172,141,174,139,176,136,178,134,178,131,179,130,180,129,180,128,182,128,183,127,185,125,187,125,190,124,192,123,195,122,198,122,201,121,205,121,209,121,213,121,217,121,222,121,226,122,228,122,231,124,233,125,234,127,236,129,238,131,241,136,242,139,244,143,245,145,246,147,246,149,246,151,246,154,246,157,244,161,241,165,237,170,234,174,232,176,228,179,225,180,223,182,219,183,217,183,214,184,211,184,208,184,206,185,203,185,201,185,198,185,197,185,194,185,192,185,191,185,190,185,189,185,188,185,187,185,186,185});
  one.learn("b", new int[] {165,374,166,368,167,361,168,353,170,345,171,334,171,325,171,316,171,306,171,297,171,288,171,278,169,270,168,260,166,252,164,243,162,236,161,229,160,224,160,220,159,217,159,215,159,214,159,212,160,210,162,209,165,207,169,204,174,203,179,201,185,199,192,197,199,195,206,194,216,192,224,191,233,190,243,190,251,190,259,190,263,190,266,190,267,192,267,194,267,196,267,200,267,203,267,206,267,210,267,213,265,218,260,222,254,228,247,233,240,237,231,241,223,243,215,245,206,247,199,249,194,251,188,253,185,254,184,254,184,255,190,256,200,258,216,262,234,266,250,270,265,276,276,280,286,285,291,288,293,293,293,295,294,299,294,303,294,309,292,315,289,319,284,324,279,327,272,331,265,333,257,336,248,337,238,338,229,339,219,339,213,339,207,339,204,339,202,338,200,337,198,337,198,336,197,336,196,336,195,336,195,335,});
  one.learn("x", new int[] {108,135,121,158,133,182,145,203,156,226,164,244,173,262,180,277,186,290,192,302,197,314,202,325,206,335,210,344,213,350,216,354,217,357,217,359,218,361,219,358,219,351,219,343,219,334,219,323,219,311,218,298,217,285,215,272,215,261,214,250,214,239,214,229,214,218,214,207,216,196,219,187,221,177,224,169,227,162,228,157,229,155,229,154,229,153,228,158,224,169,218,182,211,196,203,211,194,232,184,252,172,274,160,295,147,314,137,326,128,336,121,342,116,347,112,350,110,352,109,354,});
  one.learn("check", new int[] {143,237,146,243,150,249,153,256,156,263,158,271,160,279,161,287,163,293,164,298,165,301,166,302,168,299,172,294,177,288,184,279,194,269,208,255,229,236,249,217,272,196,290,179,306,164,316,154,325,145,331,139,333,135,334,135,
});
  // one.forget("circle");
  
  // 3. Bind templates to methods (callbacks):
  one.bind("triangle circle p b x check", "detected");
  // one.off("circle");
}

// 4. Implement callbacks:
void detected(String gesture, float percent, int startX, int startY, int centroidX, int centroidY, int endX, int endY){
  println("Gesture: "+gesture+", "+startX+"/"+startY+", "+centroidX+"/"+centroidY+", "+endX+"/"+endY);    
  name = gesture;
}

void draw(){
  background(255);
  
  fill(0); noStroke();
  text("Detected gesture: "+name, 30, 40);
  text("Draw a counter-clockwise circle or triangle.", 30, height-30);

  // Optional draw:
  one.draw();
}

void mouseReleased()
{
  one.check();
}

// 5. Track data:
void mouseDragged(){
  one.track(mouseX, mouseY);
}
